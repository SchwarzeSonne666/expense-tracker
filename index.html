<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="맥북용 가계부 월간 고정지출 관리 프로그램">
    <title>월간 고정지출 관리 | 가계부</title>
    <link rel="stylesheet" href="styles.css?v=39">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header>
            <nav class="nav-tabs">
                <a href="index.html" class="nav-tab active">월간 고정지출</a>
                <a href="skincare.html" class="nav-tab">피부관리</a>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Daily Ledger (가계부) -->
            <section class="card daily-ledger-card">
                <!-- Month Navigator -->
                <div class="daily-month-nav">
                    <button class="daily-nav-btn" id="prevMonth">◀</button>
                    <span class="daily-month-label" id="currentMonthLabel">2026년 2월</span>
                    <button class="daily-nav-btn" id="nextMonth">▶</button>
                </div>

                <!-- Monthly Summary -->
                <div class="daily-summary">
                    <div class="daily-summary-row income">
                        <span class="daily-summary-label">수입</span>
                        <span class="daily-summary-value" id="dailyIncome">₩0</span>
                    </div>
                    <div class="daily-summary-row fixed">
                        <span class="daily-summary-label">고정</span>
                        <span class="daily-summary-value" id="dailyFixed">₩0</span>
                    </div>
                    <div class="daily-summary-row expense">
                        <span class="daily-summary-label">지출</span>
                        <span class="daily-summary-value" id="dailyExpense">₩0</span>
                    </div>
                    <div class="daily-summary-row balance">
                        <span class="daily-summary-label">잔액</span>
                        <span class="daily-summary-value" id="dailyBalance">₩0</span>
                    </div>
                </div>

                <!-- Daily Items List -->
                <div class="daily-list" id="dailyList">
                    <!-- Rendered by JS -->
                </div>

                <!-- Inline Add Form -->
                <div class="daily-add-form">
                    <div class="daily-add-row">
                        <div class="daily-type-toggle">
                            <button type="button" class="daily-type-btn active" data-type="expense">지출</button>
                            <button type="button" class="daily-type-btn" data-type="income">수입</button>
                        </div>
                        <div class="daily-day-wrapper">
                            <button type="button" class="daily-day-btn" id="dailyDayBtn">7일</button>
                            <div class="daily-day-grid" id="dailyDayGrid">
                                <div class="daily-day-grid-inner" id="dailyDayGridInner"></div>
                            </div>
                        </div>
                    </div>
                    <div class="daily-add-row">
                        <input type="text" id="dailyName" class="daily-name-input" placeholder="항목명">
                        <div class="daily-category-wrapper">
                            <input type="text" id="dailyCategory" class="daily-category-input" placeholder="카테고리" autocomplete="off" readonly>
                            <div class="daily-category-list" id="dailyCategoryList"></div>
                        </div>
                    </div>
                    <div class="daily-add-row">
                        <input type="text" id="dailyAmount" class="daily-amount-input" placeholder="금액" inputmode="numeric">
                        <div class="daily-method-wrapper">
                            <input type="text" id="dailyMethod" class="daily-method-input" placeholder="결제수단" autocomplete="off" readonly>
                            <div class="daily-method-list" id="dailyMethodList"></div>
                        </div>
                        <div class="daily-installment-wrapper">
                            <button type="button" class="daily-installment-btn" id="dailyInstallmentBtn">일시불</button>
                            <div class="daily-installment-list" id="dailyInstallmentList"></div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary daily-add-btn" id="addDailyBtn">+ 추가</button>
                </div>
            </section>

            <!-- Fixed Expense (고정지출) -->
            <section class="card fixed-expense-card">
                <!-- Expense List -->
                <div class="expense-list-header">
                    <h2 class="card-title">월간 고정지출</h2>
                    <div class="total-badge">
                        <span class="total-badge-label">합계</span>
                        <span class="total-badge-value" id="totalExpense">₩0</span>
                    </div>
                </div>
                <div id="expenseList" class="expense-list">
                    <!-- Expenses will be dynamically inserted here -->
                </div>

                <!-- Add Button -->
                <button type="button" class="btn btn-primary fixed-add-open-btn" id="openFixedAddModal">+ 새 고정지출 추가</button>
            </section>
        </main>

        <!-- Fixed Expense Add/Edit Modal -->
        <div id="fixedAddModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="fixedModalTitle">새 고정지출 추가</h2>
                    <button class="modal-close" id="closeFixedAddModal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="expenseForm" class="fixed-add-form">
                        <div class="form-group">
                            <input type="text" id="expenseName" placeholder="항목명 (예: 넷플릭스)" required>
                        </div>
                        <div class="form-group">
                            <input type="text" id="expenseAmount" placeholder="금액 (원)" inputmode="numeric" required>
                        </div>
                        <div class="form-group">
                            <div class="category-input-wrapper">
                                <div class="custom-dropdown" id="categoryDropdown">
                                    <input type="text" id="expenseCategory" placeholder="카테고리"
                                        autocomplete="off" required>
                                    <div class="dropdown-list" id="categoryDropdownList"></div>
                                </div>
                                <button type="button" class="btn-manage-categories" id="manageCategoriesBtn" title="카테고리 관리">⚙</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="category-input-wrapper">
                                <div class="custom-dropdown" id="memoDropdown">
                                    <input type="text" id="expenseMemo" placeholder="메모 (선택)" autocomplete="off">
                                    <div class="dropdown-list" id="memoDropdownList"></div>
                                </div>
                                <button type="button" class="btn-manage-categories" id="manageMemosBtn" title="메모 관리">⚙</button>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" id="fixedFormSubmitBtn">추가</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Category Management Modal -->
        <div id="categoryModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>카테고리 관리</h2>
                    <button class="modal-close" id="closeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="newCategoryInput">새 카테고리 추가</label>
                        <div class="category-add-wrapper">
                            <input type="text" id="newCategoryInput" placeholder="카테고리 이름 입력">
                            <button type="button" class="btn btn-add-category" id="addCategoryBtn">
                                추가
                            </button>
                        </div>
                    </div>
                    <div class="category-list-section">
                        <label>등록된 카테고리</label>
                        <div id="categoryListManage" class="category-manage-list">
                            <!-- Categories will be listed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Memo Management Modal -->
    <div id="memoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>메모 관리</h2>
                <button class="modal-close" id="closeMemoModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newMemoInput">새 메모 추가</label>
                    <div class="category-add-wrapper">
                        <input type="text" id="newMemoInput" placeholder="메모 입력">
                        <button type="button" class="btn btn-add-category" id="addMemoBtn">
                            추가
                        </button>
                    </div>
                </div>
                <div class="category-list-section">
                    <label>등록된 메모</label>
                    <div id="memoListManage" class="category-manage-list">
                        <!-- Memos will be listed here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Confirm Delete Dialog -->
    <div id="confirmDialog" class="modal">
        <div class="confirm-dialog">
            <p class="confirm-message">이 항목을 삭제하시겠습니까?</p>
            <div class="confirm-actions">
                <button class="btn btn-cancel" id="confirmCancel">취소</button>
                <button class="btn btn-danger" id="confirmOk">삭제</button>
            </div>
        </div>
    </div>

    <!-- Edit Mode Banner (hidden by default) -->

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBxymXMFAEFStn2p3dHz3ItHbxYnjlQN9w",
            authDomain: "fixed-expense-management.firebaseapp.com",
            databaseURL: "https://fixed-expense-management-default-rtdb.firebaseio.com",
            projectId: "fixed-expense-management",
            storageBucket: "fixed-expense-management.firebasestorage.app",
            messagingSenderId: "524213396258",
            appId: "1:524213396258:web:9e37696ba06c84a2b6bb7b"
        };
        firebase.initializeApp(firebaseConfig);
        window.db = firebase.database();
    </script>

    <script src="auth.js?v=3"></script>
    <script src="app.js?v=16"></script>
</body>

</html>