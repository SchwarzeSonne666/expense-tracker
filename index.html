<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="맥북용 가계부 월간 고정지출 관리 프로그램">
    <title>월간 고정지출 관리 | 가계부</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header>
            <nav class="nav-tabs">
                <a href="index.html" class="nav-tab active">월간 고정지출</a>
                <a href="skincare.html" class="nav-tab">피부관리</a>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Add Expense Form -->
            <aside class="card" id="formCard">
                <div id="editBanner" class="edit-banner" style="display:none;">
                    <span>수정 중</span>
                    <button type="button" class="btn-cancel-edit" id="cancelEditBtn">취소</button>
                </div>
                <h2 class="card-title">새 지출 추가</h2>
                <form id="expenseForm">
                    <div class="form-group">
                        <label for="expenseName">지출 항목명</label>
                        <input type="text" id="expenseName" placeholder="예: 넷플릭스 구독료" required>
                    </div>

                    <div class="form-group">
                        <label for="expenseAmount">금액 (원)</label>
                        <input type="number" id="expenseAmount" placeholder="15000" min="0" step="1" required>
                    </div>

                    <div class="form-group">
                        <label for="expenseCategory">카테고리</label>
                        <div class="category-input-wrapper">
                            <div class="custom-dropdown" id="categoryDropdown">
                                <input type="text" id="expenseCategory" placeholder="카테고리 입력 또는 선택"
                                    autocomplete="off" required>
                                <div class="dropdown-list" id="categoryDropdownList">
                                    <!-- Categories will be dynamically populated -->
                                </div>
                            </div>
                            <button type="button" class="btn-manage-categories" id="manageCategoriesBtn"
                                title="카테고리 관리">
                                ⚙
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="expenseDate">결제일</label>
                        <div class="date-picker" id="datePicker">
                            <button type="button" class="date-picker-trigger" id="datePickerTrigger">
                                <span class="date-picker-text" id="datePickerText">결제일 선택</span>
                                <span class="date-picker-arrow">▾</span>
                            </button>
                            <input type="hidden" id="expenseDate">
                            <div class="date-picker-popup" id="datePickerPopup">
                                <div class="date-tabs" id="dateTabs">
                                    <button type="button" class="date-tab active" data-range="1-10">1~10일</button>
                                    <button type="button" class="date-tab" data-range="11-20">11~20일</button>
                                    <button type="button" class="date-tab" data-range="21-31">21~31일</button>
                                </div>
                                <div class="date-chips" id="dateChips">
                                    <!-- chips generated by JS -->
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="expenseMemo">메모 (선택)</label>
                        <div class="category-input-wrapper">
                            <div class="custom-dropdown" id="memoDropdown">
                                <input type="text" id="expenseMemo" placeholder="메모 입력 또는 선택"
                                    autocomplete="off">
                                <div class="dropdown-list" id="memoDropdownList">
                                    <!-- Memos will be dynamically populated -->
                                </div>
                            </div>
                            <button type="button" class="btn-manage-categories" id="manageMemosBtn"
                                title="메모 관리">
                                ⚙
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        + 추가하기
                    </button>
                </form>
            </aside>

            <!-- Expense List -->
            <section class="card expense-list-card">
                <div class="expense-list-header">
                    <h2 class="card-title">월간 고정지출 목록</h2>
                    <div class="total-badge">
                        <span class="total-badge-label">합계</span>
                        <span class="total-badge-value" id="totalExpense">₩0</span>
                    </div>
                </div>
                <div id="expenseList" class="expense-list">
                    <!-- Expenses will be dynamically inserted here -->
                </div>
            </section>
        </main>

        <!-- Category Management Modal -->
        <div id="categoryModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>카테고리 관리</h2>
                    <button class="modal-close" id="closeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="newCategoryInput">새 카테고리 추가</label>
                        <div class="category-add-wrapper">
                            <input type="text" id="newCategoryInput" placeholder="카테고리 이름 입력">
                            <button type="button" class="btn btn-add-category" id="addCategoryBtn">
                                추가
                            </button>
                        </div>
                    </div>
                    <div class="category-list-section">
                        <label>등록된 카테고리</label>
                        <div id="categoryListManage" class="category-manage-list">
                            <!-- Categories will be listed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Memo Management Modal -->
    <div id="memoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>메모 관리</h2>
                <button class="modal-close" id="closeMemoModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newMemoInput">새 메모 추가</label>
                    <div class="category-add-wrapper">
                        <input type="text" id="newMemoInput" placeholder="메모 입력">
                        <button type="button" class="btn btn-add-category" id="addMemoBtn">
                            추가
                        </button>
                    </div>
                </div>
                <div class="category-list-section">
                    <label>등록된 메모</label>
                    <div id="memoListManage" class="category-manage-list">
                        <!-- Memos will be listed here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Confirm Delete Dialog -->
    <div id="confirmDialog" class="modal">
        <div class="confirm-dialog">
            <p class="confirm-message">이 항목을 삭제하시겠습니까?</p>
            <div class="confirm-actions">
                <button class="btn btn-cancel" id="confirmCancel">취소</button>
                <button class="btn btn-danger" id="confirmOk">삭제</button>
            </div>
        </div>
    </div>

    <!-- Edit Mode Banner (hidden by default) -->

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBxymXMFAEFStn2p3dHz3ItHbxYnjlQN9w",
            authDomain: "fixed-expense-management.firebaseapp.com",
            databaseURL: "https://fixed-expense-management-default-rtdb.firebaseio.com",
            projectId: "fixed-expense-management",
            storageBucket: "fixed-expense-management.firebasestorage.app",
            messagingSenderId: "524213396258",
            appId: "1:524213396258:web:9e37696ba06c84a2b6bb7b"
        };
        firebase.initializeApp(firebaseConfig);
        window.db = firebase.database();
    </script>

    <script src="auth.js?v=1"></script>
    <script src="app.js?v=4"></script>
</body>

</html>