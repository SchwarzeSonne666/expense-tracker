<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="í”¼ë¶€ê´€ë¦¬ ë£¨í‹´ ëŒ€ì‹œë³´ë“œ">
    <title>í”¼ë¶€ê´€ë¦¬ ë£¨í‹´ | ëŒ€ì‹œë³´ë“œ</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="skincare.css?v=15">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header>
            <nav class="nav-tabs">
                <a href="index.html" class="nav-tab">ê³ ì •ì§€ì¶œ</a>
                <a href="skincare.html" class="nav-tab active">í”¼ë¶€ê´€ë¦¬</a>
            </nav>
        </header>

        <!-- Today's Summary -->
        <section class="sc-today">
            <div class="sc-today-label">TODAY</div>
            <h2 class="sc-today-day" id="todayDay"></h2>
            <div class="sc-today-active" id="todayActive"></div>
        </section>

        <!-- Time Toggle + Edit Button -->
        <div class="sc-time-row">
            <div class="sc-time-toggle">
                <button class="sc-time-btn" data-time="morning">ì•„ì¹¨</button>
                <button class="sc-time-btn" data-time="evening">ì €ë…</button>
            </div>
            <button class="sc-edit-btn" id="editRoutineBtn">ë£¨í‹´ í¸ì§‘</button>
        </div>

        <!-- Routine Steps -->
        <section class="sc-routine" id="routineSteps">
            <!-- populated by JS -->
        </section>

        <!-- Weekly Calendar -->
        <section class="sc-section">
            <h3 class="sc-section-title">ì£¼ê°„ ìº˜ë¦°ë”</h3>
            <div class="sc-calendar" id="weeklyCalendar"></div>
        </section>

        <!-- Spot Care -->
        <section class="sc-section">
            <h3 class="sc-section-title">ìŠ¤íŒŸ ì¼€ì–´</h3>
            <div class="sc-spot-grid">
                <div class="sc-spot-card">
                    <div class="sc-spot-icon">ğŸ”´</div>
                    <div class="sc-spot-label">ìƒˆ ì—¬ë“œë¦„</div>
                    <div class="sc-spot-product">íŒŒí‹°ì˜¨ íŠ¸ëŸ¬ë¸” ì„¸ëŸ¼</div>
                    <div class="sc-spot-how">ì €ë… ë§ˆì§€ë§‰, í•´ë‹¹ ë¶€ìœ„ë§Œ</div>
                </div>
                <div class="sc-spot-card">
                    <div class="sc-spot-icon">ğŸŸ¤</div>
                    <div class="sc-spot-label">ìêµ­/ìƒ‰ì†Œì¹¨ì°©</div>
                    <div class="sc-spot-product">ì•„ì ¤ë¦¬ì•„í¬ë¦¼</div>
                    <div class="sc-spot-how">ì €ë… í¬ë¦¼ í›„, ì£¼ 3~4íšŒ</div>
                </div>
                <div class="sc-spot-card">
                    <div class="sc-spot-icon">ğŸ”¥</div>
                    <div class="sc-spot-label">ì—¼ì¦ ì‹¬í•  ë•Œ</div>
                    <div class="sc-spot-product">ë…¸ìŠ¤ì¹´ë‚˜ê²”</div>
                    <div class="sc-spot-how">ì·¨ì¹¨ ì „, ì–‡ê²Œ ë„í¬</div>
                </div>
                <div class="sc-spot-card">
                    <div class="sc-spot-icon">ğŸ˜³</div>
                    <div class="sc-spot-label">í™ì¡°/ì—´ê°</div>
                    <div class="sc-spot-product">ëƒ‰ì¥ ìºë¡¯ ì¹´ë° íŒ¨ë“œ</div>
                    <div class="sc-spot-how">í† ë„ˆ ëŒ€ì‹  ì‚¬ìš© + ì‹œì¹´ ë°¤ êµì²´</div>
                </div>
            </div>
        </section>

        <!-- Product List -->
        <section class="sc-section">
            <div class="sc-section-header">
                <h3 class="sc-section-title" style="border:none;margin:0;padding:0;">ì „ì²´ ì œí’ˆ ëª©ë¡</h3>
                <div class="sc-section-actions">
                    <button class="sc-copy-btn" id="copyProductsBtn" title="ì œí’ˆ ëª©ë¡ ë³µì‚¬">
                        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                        ë³µì‚¬
                    </button>
                    <button class="sc-add-product-btn" id="addProductBtn">
                        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                        ì¶”ê°€
                    </button>
                </div>
            </div>
            <div class="sc-products" id="productList"></div>
        </section>
    </div>

    <!-- Edit Routine Modal -->
    <div id="editRoutineModal" class="modal">
        <div class="modal-content sc-edit-modal">
            <div class="modal-header">
                <h2 id="editRoutineTitle">ë£¨í‹´ í¸ì§‘</h2>
                <button class="modal-close" id="closeEditRoutine">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Time Scope Selector -->
                <div class="sc-edit-scope">
                    <button class="sc-edit-scope-btn active" data-scope="morning">â˜€ï¸ ì•„ì¹¨</button>
                    <button class="sc-edit-scope-btn" data-scope="evening_common">ğŸŒ™ ì €ë… ê³µí†µ</button>
                    <button class="sc-edit-scope-btn" data-scope="evening_day">ğŸ“… ì €ë… ìš”ì¼ë³„</button>
                </div>
                <!-- Day Tabs (only visible for evening_day, populated by JS) -->
                <div class="sc-edit-day-tabs" id="editDayTabs" style="display:none"></div>
                <!-- Info Banner -->
                <div id="editRoutineInfo" class="sc-edit-info-text" style="display:none"></div>
                <!-- Step List -->
                <div class="sc-edit-routine-list" id="editRoutineList">
                    <!-- populated by JS -->
                </div>
                <!-- Add Step -->
                <div class="sc-edit-add-step">
                    <div class="custom-dropdown" id="addStepDropdown">
                        <input type="text" id="addStepInput" placeholder="ì œí’ˆ ê²€ìƒ‰í•˜ì—¬ ì¶”ê°€..." autocomplete="off">
                        <div class="dropdown-list" id="addStepDropdownList"></div>
                    </div>
                    <button class="btn btn-add-category" id="addStepBtn">ì¶”ê°€</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="productModalTitle">ì œí’ˆ ì¶”ê°€</h2>
                <button class="modal-close" id="closeAddProduct">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ì¹´í…Œê³ ë¦¬</label>
                    <div class="custom-dropdown" id="categoryDropdownSC">
                        <input type="text" id="newProductCategory" placeholder="ì¹´í…Œê³ ë¦¬ ì„ íƒ" autocomplete="off" readonly data-value="serum">
                        <div class="dropdown-list" id="categoryDropdownListSC"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>ì œí’ˆëª…</label>
                    <input type="text" id="newProductName" placeholder="ì œí’ˆëª… ì…ë ¥">
                </div>
                <div class="form-group">
                    <label>ì—­í• </label>
                    <input type="text" id="newProductRole" placeholder="ì˜ˆ: ìˆ˜ë¶„ ì¶©ì „">
                </div>
                <div class="form-group">
                    <label>ì‚¬ìš© ì‹œì </label>
                    <input type="text" id="newProductWhen" placeholder="ì˜ˆ: ì•„ì¹¨Â·ì €ë…">
                </div>
                <button class="btn btn-primary" id="saveProductBtn" style="margin-top:0.5rem;">ì¶”ê°€</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBxymXMFAEFStn2p3dHz3ItHbxYnjlQN9w",
            authDomain: "fixed-expense-management.firebaseapp.com",
            databaseURL: "https://fixed-expense-management-default-rtdb.firebaseio.com",
            projectId: "fixed-expense-management",
            storageBucket: "fixed-expense-management.firebasestorage.app",
            messagingSenderId: "524213396258",
            appId: "1:524213396258:web:9e37696ba06c84a2b6bb7b"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        window.db = firebase.database();
    </script>
    <script src="skincare.js?v=13"></script>
</body>

</html>
